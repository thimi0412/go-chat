<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chat</title>
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
  <ul id="message"></ul>
  This chat application is used by WebSocket
  <form id="chatbox">
    <textarea></textarea>
    <input type="submit" value="Send">
  <!-- /chatbox --></form>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script>
    $(function() {
    var socket = null;
    var msgBox = $("#chatbox textarea");
    var message = $("#message");
    $("#chatbox").submit(function() {
      if (!msgBox.val()) return false;
      if (!socket) {
        alert("Error : Don't connect WebSocket")
        return false;
      }
      socket.send(msgBox.val());
      msgBox.val("");
      return false;
    });
    if (!window["WebSocket"]) {
      alert("Error : This is an unsupported browser for WebSocket")
    } else {
      socket = new WebSocket("ws://localhost:8080/room");
      socket.onclose = function() {
        alert("Connection terminated")
      }
      socket.onmessage = function(e) {
        message.append($("<li>").text(e.data));
      }
    }
  });
  </script>
</body>
</html>